# HTTP
## webservices (sous domaines DNS et virtual host)

map -p 80 --script dns-brute.nse vulnweb.com 

## vitual hosts:

nmap -p 80 --script hostmap-bfk.nse nmap.org 

## enum folders

nmap --script http-enum 192.168.10.55
nmap --script -http-enum --script-args http-enum.basepath='pub/' 192.168.10.55
nmap --script http-title -sV -p 80 192.168.1.0/24

## burp

proxy:
127.0.0.1 8080

#lorsque certaine page (contenant des token par éxemple) ne peuve pas traverser le proxy:
ajouter une exception dans la conf proxu de firefox;
ex GUI:
"No proxy for"
localhost, 127.0.0.1,https://cdn.flexmonster.com/flexmonster.js

tests: intercepter les requetes avec le proxy, puis clic droit, send to repeater ou send to intruder

## ffuf

apt install ffuf -y
"FUZZ" sert à assigner une wordlist dans l'url:

### repertoire à la racine:

ffuf -w /opt/useful/SecLists/Discovery/Web-Content/directory-list-2.3-small.txt:FUZZ -u http://SERVER_IP:PORT/FUZZ -v -c

### trouver les extentions acceptées par la cible:

ffuf -w /opt/useful/SecLists/recu:FUZZ -u http://SERVER_IP:PORT/blog/indexFUZZ

### extension et recursivité (les repertoires son testé quand meme automatiquement):

ffuf -w /opt/useful/SecLists/Discovery/Web-Content/directory-list-2.3-small.txt:FUZZ -u http://SERVER_IP:PORT/FUZZ -recursion -recursion-depth 1 -e .php,.txt,.zip,.html,.js,.jsp,.txt

### find subdomains:

ffuf -w /opt/useful/SecLists/Discovery/DNS/subdomains-top1million-5000.txt:FUZZ -u https://FUZZ.hackthebox.eu/

### find vhost:

ffuf -w /opt/useful/SecLists/Discovery/DNS/subdomains-top1million-5000.txt:FUZZ -u http://academy.htb:PORT/ -H 'Host: FUZZ.academy.htb' -fs <taille de la réponse à exclure>

### find GET parameters:

ffuf -w /opt/useful/SecLists/Discovery/Web-Content/burp-parameter-names.txt:FUZZ -u http://admin.academy.htb:PORT/admin/admin.php?FUZZ=key -fs <taille de la réponse à exclure>

### find POST paramaters:

ffuf -w ids.txt:FUZZ -u http://admin.academy.htb:PORT/admin/admin.php -X POST -d 'id=FUZZ' -H 'Content-Type: application/x-www-form-urlencoded' -fs <taille de la réponse à exclure>

### decomenter les SecLists:

 sudo sed -i 's/^\#.*$//g' /opt/useful/SecLists/Discovery/Web-Content/directory-list-2.3-small.txt && sudo sed -i '/^$/d' /opt/useful/SecLists/Discovery/Web-Content/directory-list-2.3-small.txt
 sudo sed -i 's/^\#.*$//g' /opt/useful/SecLists/Discovery/Web-Content/directory-list-2.3-big.txt && sudo sed -i '/^$/d' /opt/useful/SecLists/Discovery/Web-Content/directory-list-2.3-big.txt

### options ffuf pour logger les résultats

`-of csv -o ffuf-result.txt`
(VScode and search expected result)

### options ffuf proxy:

`-replay-proxy http://127.0.0.1:8888`

## dirb

#wordlist + extentions

dirb http://10.10.10.159 /usr/share/dirb/wordlists/big.txt -X .log,.txt,.conf,.html,.php,.bck,,

#si dico trop volumineux > dirbuster

## chemin des listes (kali): 

/home/michael/.ZAP/fuzzers/dirbuster/directory-list-1.0.txt
/usr/share/dirbuster/wordlists
/usr/share/dirbuster/wordlists/apache-user-enum-1.0.txt
/usr/share/dirbuster/wordlists/apache-user-enum-2.0.txt
/usr/share/dirbuster/wordlists/directories.jbrofuzz
/usr/share/dirbuster/wordlists/directory-list-1.0.txt
/usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt
/usr/share/dirbuster/wordlists/directory-list-2.3-small.txt
/usr/share/dirbuster/wordlists/directory-list-lowercase-2.3-medium.txt
/usr/share/dirbuster/wordlists/directory-list-lowercase-2.3-small.txt
/usr/share/wordlists/dirbuster
/var/lib/dpkg/info/dirbuster.list

## wapalizer

Extension Firefox qui identifie les techno utilisée sur un site (CMS etc...)

## Nikto

nikto -host htttp://<victim> -p <port> [ -ssl ] [-vhost]

### cewl pour creer des wordlists  et énumer le site.